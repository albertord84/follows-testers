curl 'https://www.instagram.com/' \
--compressed \
-c /tmp/cookies.tmp \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'Upgrade-Insecure-Requests: 1'

curl 'https://www.instagram.com/qp/batch_fetch_web/' \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/' \
-H 'X-CSRFToken: %s' \
-H 'X-Instagram-AJAX: d4e4c9fdb67b' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=%s; rur=%s; mcd=%s; csrftoken=%s' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'surfaces_to_queries=%7B%225095%22%3A%22viewer()+%7B%5Cn++eligible_promotions.surface_nux_id(%3Csurface%3E).external_gating_permitted_qps(%3Cexternal_gating_permitted_qps%3E)+%7B%5Cn++++edges+%7B%5Cn++++++priority%2C%5Cn++++++time_range+%7B%5Cn++++++++start%2C%5Cn++++++++end%5Cn++++++%7D%2C%5Cn++++++node+%7B%5Cn++++++++id%2C%5Cn++++++++promotion_id%2C%5Cn++++++++max_impressions%2C%5Cn++++++++triggers%2C%5Cn++++++++template+%7B%5Cn++++++++++name%2C%5Cn++++++++++parameters+%7B%5Cn++++++++++++name%2C%5Cn++++++++++++string_value%5Cn++++++++++%7D%5Cn++++++++%7D%2C%5Cn++++++++creatives+%7B%5Cn++++++++++title+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++content+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++footer+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++social_context+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++primary_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++secondary_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++dismiss_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++image+%7B%5Cn++++++++++++uri%5Cn++++++++++%7D%5Cn++++++++%7D%5Cn++++++%7D%5Cn++++%7D%5Cn++%7D%5Cn%7D%22%2C%225780%22%3A%22viewer()+%7B%5Cn++eligible_promotions.surface_nux_id(%3Csurface%3E).external_gating_permitted_qps(%3Cexternal_gating_permitted_qps%3E)+%7B%5Cn++++edges+%7B%5Cn++++++priority%2C%5Cn++++++time_range+%7B%5Cn++++++++start%2C%5Cn++++++++end%5Cn++++++%7D%2C%5Cn++++++node+%7B%5Cn++++++++id%2C%5Cn++++++++promotion_id%2C%5Cn++++++++max_impressions%2C%5Cn++++++++triggers%2C%5Cn++++++++template+%7B%5Cn++++++++++name%2C%5Cn++++++++++parameters+%7B%5Cn++++++++++++name%2C%5Cn++++++++++++string_value%5Cn++++++++++%7D%5Cn++++++++%7D%2C%5Cn++++++++creatives+%7B%5Cn++++++++++title+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++content+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++footer+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++social_context+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++primary_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++secondary_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++dismiss_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++image+%7B%5Cn++++++++++++uri%5Cn++++++++++%7D%5Cn++++++++%7D%5Cn++++++%7D%5Cn++++%7D%5Cn++%7D%5Cn%7D%22%7D&vc_policy=default&version=1'

curl 'https://www.instagram.com/ajax/bz' \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/' \
-H 'X-CSRFToken: %s' \
-H 'X-Instagram-AJAX: d4e4c9fdb67b' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=%s; rur=%s; mcd=%s; csrftoken=%s' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'q=%5B%7B%22page_id%22%3A%22b8nr8x%22%2C%22posts%22%3A%5B%5B%22qe%3Aexpose%22%2C%7B%22qe%22%3A%22su_universe%22%2C%22mid%22%3A%22%s%22%7D%2C1540315780568%2C0%5D%5D%2C%22trigger%22%3A%22qe%3Aexpose%22%2C%22send_method%22%3A%22ajax%22%7D%5D&ts=1540315788333'

curl 'https://www.instagram.com/accounts/login/?__a=1' \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/accounts/login/?source=auth_switcher' \
-H 'X-Instagram-GIS: 5fe7d1651104a6619e4db3b4be631fd9' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=%s; rur=%s; mcd=%s; csrftoken=%s' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers'

curl 'https://www.instagram.com/accounts/login/ajax/' \
-c /tmp/cookies.tmp \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/accounts/login/?source=auth_switcher' \
-H 'X-CSRFToken: %s' \
-H 'X-Instagram-AJAX: d4e4c9fdb67b' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=%s; rur=%s; mcd=%s; csrftoken=%s' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'username=ig_username&password=***********&queryParams=%7B%22source%22%3A%22auth_switcher%22%7D'

# challenge required

curl 'https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'X-CSRFToken: m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt' \
-H 'X-Instagram-AJAX: 16f0f508ab09' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: rur=PRN; mcd=3; csrftoken=m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt; mid=W8-BOgAEAAF8-ylkHH_7WMLn-zcw' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'choice=1'

# send code again, please

curl 'https://www.instagram.com/challenge/replay/7954519909/eNhHWuyvSd/' \
-H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0' \
-H 'Accept: */*' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'X-CSRFToken: m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt' \
-H 'X-Instagram-AJAX: 16f0f508ab09' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: rur=PRN; mcd=3; csrftoken=m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt; mid=W8-BOgAEAAF8-ylkHH_7WMLn-zcw' \
-H 'DNT: 1' \
-H 'Connection: keep-alive'
--data ''

# when i got the code

curl 'https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0' \
-H 'Accept: */*' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'X-CSRFToken: m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt' \
-H 'X-Instagram-AJAX: 16f0f508ab09' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: rur=PRN; mcd=3; csrftoken=m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt; mid=W8-BOgAEAAF8-ylkHH_7WMLn-zcw' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'security_code=310469'
