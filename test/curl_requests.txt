curl 'https://www.instagram.com/' \
--compressed \
-c /tmp/cookies.tmp \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'Upgrade-Insecure-Requests: 1'

curl 'https://www.instagram.com/qp/batch_fetch_web/' \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/' \
-H 'X-CSRFToken: %s' \
-H 'X-Instagram-AJAX: d4e4c9fdb67b' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=%s; rur=%s; mcd=%s; csrftoken=%s' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'surfaces_to_queries=%7B%225095%22%3A%22viewer()+%7B%5Cn++eligible_promotions.surface_nux_id(%3Csurface%3E).external_gating_permitted_qps(%3Cexternal_gating_permitted_qps%3E)+%7B%5Cn++++edges+%7B%5Cn++++++priority%2C%5Cn++++++time_range+%7B%5Cn++++++++start%2C%5Cn++++++++end%5Cn++++++%7D%2C%5Cn++++++node+%7B%5Cn++++++++id%2C%5Cn++++++++promotion_id%2C%5Cn++++++++max_impressions%2C%5Cn++++++++triggers%2C%5Cn++++++++template+%7B%5Cn++++++++++name%2C%5Cn++++++++++parameters+%7B%5Cn++++++++++++name%2C%5Cn++++++++++++string_value%5Cn++++++++++%7D%5Cn++++++++%7D%2C%5Cn++++++++creatives+%7B%5Cn++++++++++title+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++content+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++footer+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++social_context+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++primary_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++secondary_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++dismiss_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++image+%7B%5Cn++++++++++++uri%5Cn++++++++++%7D%5Cn++++++++%7D%5Cn++++++%7D%5Cn++++%7D%5Cn++%7D%5Cn%7D%22%2C%225780%22%3A%22viewer()+%7B%5Cn++eligible_promotions.surface_nux_id(%3Csurface%3E).external_gating_permitted_qps(%3Cexternal_gating_permitted_qps%3E)+%7B%5Cn++++edges+%7B%5Cn++++++priority%2C%5Cn++++++time_range+%7B%5Cn++++++++start%2C%5Cn++++++++end%5Cn++++++%7D%2C%5Cn++++++node+%7B%5Cn++++++++id%2C%5Cn++++++++promotion_id%2C%5Cn++++++++max_impressions%2C%5Cn++++++++triggers%2C%5Cn++++++++template+%7B%5Cn++++++++++name%2C%5Cn++++++++++parameters+%7B%5Cn++++++++++++name%2C%5Cn++++++++++++string_value%5Cn++++++++++%7D%5Cn++++++++%7D%2C%5Cn++++++++creatives+%7B%5Cn++++++++++title+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++content+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++footer+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++social_context+%7B%5Cn++++++++++++text%5Cn++++++++++%7D%2C%5Cn++++++++++primary_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++secondary_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++dismiss_action%7B%5Cn++++++++++++title+%7B%5Cn++++++++++++++text%5Cn++++++++++++%7D%2C%5Cn++++++++++++url%2C%5Cn++++++++++++limit%2C%5Cn++++++++++++dismiss_promotion%5Cn++++++++++%7D%2C%5Cn++++++++++image+%7B%5Cn++++++++++++uri%5Cn++++++++++%7D%5Cn++++++++%7D%5Cn++++++%7D%5Cn++++%7D%5Cn++%7D%5Cn%7D%22%7D&vc_policy=default&version=1'

curl 'https://www.instagram.com/ajax/bz' \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/' \
-H 'X-CSRFToken: %s' \
-H 'X-Instagram-AJAX: d4e4c9fdb67b' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=%s; rur=%s; mcd=%s; csrftoken=%s' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'q=%5B%7B%22page_id%22%3A%22b8nr8x%22%2C%22posts%22%3A%5B%5B%22qe%3Aexpose%22%2C%7B%22qe%22%3A%22su_universe%22%2C%22mid%22%3A%22%s%22%7D%2C1540315780568%2C0%5D%5D%2C%22trigger%22%3A%22qe%3Aexpose%22%2C%22send_method%22%3A%22ajax%22%7D%5D&ts=1540315788333'

curl 'https://www.instagram.com/accounts/login/?__a=1' \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/accounts/login/?source=auth_switcher' \
-H 'X-Instagram-GIS: 5fe7d1651104a6619e4db3b4be631fd9' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=%s; rur=%s; mcd=%s; csrftoken=%s' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers'

curl 'https://www.instagram.com/accounts/login/ajax/' \
-c /tmp/cookies.tmp \
-H 'User-Agent: %s' \
-H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/accounts/login/?source=auth_switcher' \
-H 'X-CSRFToken: %s' \
-H 'X-Instagram-AJAX: d4e4c9fdb67b' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=%s; rur=%s; mcd=%s; csrftoken=%s' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'username=ig_username&password=***********&queryParams=%7B%22source%22%3A%22auth_switcher%22%7D'

# challenge required

curl 'https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'X-CSRFToken: m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt' \
-H 'X-Instagram-AJAX: 16f0f508ab09' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: rur=PRN; mcd=3; csrftoken=m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt; mid=W8-BOgAEAAF8-ylkHH_7WMLn-zcw' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'choice=1'

# send code again, please

curl 'https://www.instagram.com/challenge/replay/7954519909/eNhHWuyvSd/' \
-H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0' \
-H 'Accept: */*' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'X-CSRFToken: m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt' \
-H 'X-Instagram-AJAX: 16f0f508ab09' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: rur=PRN; mcd=3; csrftoken=m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt; mid=W8-BOgAEAAF8-ylkHH_7WMLn-zcw' \
-H 'DNT: 1' \
-H 'Connection: keep-alive'
--data ''

# when i got the code

curl 'https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0' \
-H 'Accept: */*' \
-H 'Accept-Language: es,en-US;q=0.7,en;q=0.3' \
-H 'Referer: https://www.instagram.com/challenge/7954519909/eNhHWuyvSd/' \
-H 'X-CSRFToken: m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt' \
-H 'X-Instagram-AJAX: 16f0f508ab09' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: rur=PRN; mcd=3; csrftoken=m6xRcumhiPqvCkTTnyzsFRL6B6vJBzZt; mid=W8-BOgAEAAF8-ylkHH_7WMLn-zcw' \
-H 'DNT: 1' \
-H 'Connection: keep-alive' \
-H 'TE: Trailers' \
--data 'security_code=310469'

# primera pagina de a quien sigo (following)

curl 'https://www.instagram.com/graphql/query/?query_hash=c56ee0ae1f89cdbd1c89e2bc6b8f3d18&variables=%7B%22id%22%3A%223670825632%22%2C%22include_reel%22%3Atrue%2C%22fetch_mutual%22%3Afalse%2C%22first%22%3A24%7D' \
-H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:63.0) Gecko/20100101 Firefox/63.0' \
-H 'Accept-Language: en-US,en;q=0.5' \
-H 'Referer: https://www.instagram.com/yordanoweb/following/' \
-H 'X-Instagram-GIS: f66119f2f93d92cdf93c2ea932a307de' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Cookie: mid=W9HmNAAEAAGSvaYIC6XOkhcxhqo_; mcd=3; csrftoken=jeIxw1bvSOgeujnjBMYh33o1HvXp0Fx3; shbid=12443; ds_user_id=3670825632; sessionid=IGSC6828514fa1a82ef10035141cdadfe7973941d2fb2109f2c9a99906ceb27ed08b%3ANW4MpRpMGqPleuaoaogNOe3xXk4iOVLY%3A%7B%22_auth_user_id%22%3A3670825632%2C%22_auth_user_backend%22%3A%22accounts.backends.CaseInsensitiveModelBackend%22%2C%22_auth_user_hash%22%3A%22%22%2C%22_platform%22%3A4%2C%22_token_ver%22%3A2%2C%22_token%22%3A%223670825632%3AJYeiaMI9qgsul8StHwa4j9GWrunhlAJB%3Ad13fa0181709a9b7fb5e6d7370d3e721cba3d5dc9762690b496265db936b0f15%22%2C%22last_refreshed%22%3A1540841672.7964630127%7D; rur=FTW; urlgen="{\"169.158.137.115\": 10569}:1gHDKD:7tCi8_j0QKhPeKhSCOUQz5rFuMA"'

curl 'https://www.instagram.com/graphql/query/?query_hash=c56ee0ae1f89cdbd1c89e2bc6b8f3d18&variables=%7B%22id%22%3A%223670825632%22%2C%22include_reel%22%3Atrue%2C%22fetch_mutual%22%3Afalse%2C%22first%22%3A12%2C%22after%22%3A%22QVFEbkFwOGFPMW5vajJGaTYzQ0NadFRrSE5LY3RORUw3eExWUDJmYVlBR2RnQ0hUVk9wb3dPUnlPNklEX2pHd0NXa1RLaVBNYUpHZkV0ek8xd1NRZTFydg%3D%3D%22%7D' \
-H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:63.0) Gecko/20100101 Firefox/63.0' \
-H 'Accept-Language: en-US,en;q=0.5' \
-H 'Referer: https://www.instagram.com/yordanoweb/following/' \
-H 'X-Instagram-GIS: 9e2e66cd338f3054cbd0e7f40f4fa4e4' \
-H 'X-Requested-With: XMLHttpRequest' \
-H 'Connection: keep-alive' \
-H 'Cookie: mid=W9HmNAAEAAGSvaYIC6XOkhcxhqo_; mcd=3; csrftoken=jeIxw1bvSOgeujnjBMYh33o1HvXp0Fx3; shbid=12443; ds_user_id=3670825632; sessionid=IGSC6828514fa1a82ef10035141cdadfe7973941d2fb2109f2c9a99906ceb27ed08b%3ANW4MpRpMGqPleuaoaogNOe3xXk4iOVLY%3A%7B%22_auth_user_id%22%3A3670825632%2C%22_auth_user_backend%22%3A%22accounts.backends.CaseInsensitiveModelBackend%22%2C%22_auth_user_hash%22%3A%22%22%2C%22_platform%22%3A4%2C%22_token_ver%22%3A2%2C%22_token%22%3A%223670825632%3AJYeiaMI9qgsul8StHwa4j9GWrunhlAJB%3Ad13fa0181709a9b7fb5e6d7370d3e721cba3d5dc9762690b496265db936b0f15%22%2C%22last_refreshed%22%3A1540841672.7964630127%7D; rur=FTW; urlgen="{\"169.158.137.115\": 10569}:1gHDVc:8AyWtxMeSo6C6_kpuebG-X8gBoQ"'
